<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŽ‰ Happy Birthday Papa ðŸŽ‰</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: radial-gradient(ellipse at top, #1a1f47, #0b0f2e);
    font-family: 'Arial', sans-serif;
    text-align: center;
  }
  h1, #message {
    position: relative;
    z-index: 5;
    color: white;
  }
  h1 {
    font-size: clamp(1.8rem, 7vw, 3.5rem);
    white-space: nowrap;
    color: #ffd700;
    text-shadow: 0 0 15px #ffa500, 0 0 30px #ff4500, 0 0 50px #ff6347;
    margin-top: 60px;
    display: block; /* altijd onder elkaar */
  }
  #message {
    font-size: clamp(1rem, 4.5vw, 1.5rem);
    margin-top: 10px;
    padding: 0 10px;
    display: block; /* altijd onder elkaar */
  }
  button {
    padding: 15px 25px;
    font-size: clamp(1rem, 5vw, 1.2rem);
    border: none;
    border-radius: 10px;
    background: linear-gradient(45deg, #ffd700, #ffa500);
    color: black;
    font-weight: bold;
    cursor: pointer;
    margin-top: 20px;
    transition: transform 0.2s, box-shadow 0.3s;
    z-index: 10;
    position: relative;
  }
  button:hover {
    transform: scale(1.05);
    box-shadow: 0 0 15px #ffd700;
  }
  canvas {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 0;
  }
  .pulse {
    animation: float 3s ease-in-out infinite, pulse 1.5s infinite;
  }
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
  }
  @keyframes pulse {
    0%, 100% { transform: scale(1); text-shadow: 0 0 15px #ffa500; }
    50% { transform: scale(1.03); text-shadow: 0 0 25px #ff4500; }
  }

  /* Nieuw: tekst centreren op mobiele schermen */
  @media (max-width: 768px) {
    h1, #message {
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      white-space: normal; /* breekt tekst als het te lang is */
    }
  }
</style>
</head>
<body>

<h1 id="title">ðŸŽ‚</h1>
<p id="message"></p>
<button id="startBtn">Klik hier voor de verrassing ðŸŽ¶</button>

<canvas id="canvas"></canvas>
<audio id="music" src="muziek.mp3"></audio>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;

let balloons = [];
let specialBalloons = [];
let fireworks = [];
let confetti = [];
let allowRandomFireworks = false;

// ======== Ballonnen ========
class Balloon {
  constructor() { this.reset(); }
  reset() {
    this.x = Math.random() * W;
    this.y = H + Math.random() * 200;
    this.width = Math.random() * 25 + 35;
    this.height = this.width * 1.3;
    this.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
    this.speed = Math.random() * 1.2 + 0.6;
    this.angle = Math.random() * Math.PI * 2;
    this.lastEffectTime = Date.now();
    this.effectCooldown = Math.random() * 8000 + 6000;
  }
  draw() {
    ctx.save();
    ctx.translate(this.x + Math.sin(this.angle) * 8, this.y);
    ctx.beginPath();
    ctx.ellipse(0, 0, this.width / 2, this.height / 2, 0, 0, Math.PI * 2);
    ctx.fillStyle = this.color;
    ctx.fill();
    ctx.beginPath();
    ctx.ellipse(-this.width * 0.15, -this.height * 0.15, this.width / 8, this.height / 8, 0, 0, Math.PI * 2);
    ctx.fillStyle = "rgba(255,255,255,0.6)";
    ctx.fill();
    ctx.beginPath();
    ctx.moveTo(0, this.height / 2 + 6);
    ctx.lineTo(0, this.height / 2 + 25);
    ctx.strokeStyle = "#bbb";
    ctx.lineWidth = 1;
    ctx.stroke();
    ctx.restore();
  }
  update() {
    this.y -= this.speed;
    this.angle += 0.01;
    if (this.y + this.height < 0) this.reset();

    // Soms speciaal effect
    if (Date.now() - this.lastEffectTime > this.effectCooldown) {
      this.lastEffectTime = Date.now();
      this.effectCooldown = Math.random() * 8000 + 6000;
      if (Math.random() < 0.5) {
        fireworks.push(new Firework(this.x, this.y, false)); // mini vuurwerk
      } else {
        spawnConfetti(this.x, this.y, 10);
      }
    }
    this.draw();
  }
}

// ======== Speciale Ballonnen ========
class SpecialBalloon extends Balloon {
  constructor(type) {
    super();
    this.type = type; // 'color', 'glitter', 'spiral', 'confetti'
    this.rotation = 0;
    this.colorPhase = Math.random() * 360;
    this.glitterCooldown = 0;
  }
  update() {
    this.y -= this.speed;
    if (this.type === 'color') {
      this.colorPhase += 1.2;
      this.color = `hsl(${this.colorPhase % 360}, 100%, 55%)`;
    }
    if (this.type === 'glitter' && Date.now() > this.glitterCooldown) {
      this.glitterCooldown = Date.now() + 200;
      fireworks.push(new Firework(this.x, this.y, false, true)); // mini glitter
    }
    if (this.type === 'spiral') {
      this.x += Math.sin(Date.now() / 200) * 0.8;
    }
    if (this.type === 'confetti' && Date.now() > this.glitterCooldown) {
      this.glitterCooldown = Date.now() + 300;
      spawnConfetti(this.x, this.y, 5);
    }
    this.draw();
    return !(this.y + this.height < 0);
  }
}

// ======== Vuurwerk ========
class Firework {
  constructor(x, y, big=false, glitter=false) {
    this.particles = [];
    this.life = big ? 80 : 40;
    let count = big ? 90 : (glitter ? 25 : 40);
    for (let i = 0; i < count; i++) {
      const angle = Math.random() * Math.PI * 2;
      const speed = Math.random() * (big ? 7 : 4) + (big ? 5 : 1.5);
      this.particles.push({
        x, y,
        vx: Math.cos(angle) * speed,
        vy: Math.sin(angle) * speed,
        alpha: 1,
        radius: big ? 5 + Math.random()*4 : 2 + Math.random()*2,
        hue: Math.random() * 360,
        glitter: glitter || (Math.random() < 0.25)
      });
    }
  }
  update() {
    this.life--;
    this.particles.forEach(p => {
      p.x += p.vx;
      p.y += p.vy;
      p.vx *= 0.92;
      p.vy *= 0.92;
      p.alpha -= 0.015;
      p.radius *= 0.97;
      p.hue += 1.5;
    });
    this.particles = this.particles.filter(p => p.alpha > 0);
    this.draw();
  }
  draw() {
    ctx.shadowColor = "white";
    ctx.shadowBlur = 15;
    this.particles.forEach(p => {
      ctx.globalAlpha = p.glitter ? Math.random() : p.alpha;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
      ctx.fillStyle = `hsl(${p.hue}, 100%, 60%)`;
      ctx.fill();
    });
    ctx.globalAlpha = 1;
    ctx.shadowBlur = 0;
  }
}

// ======== Confetti ========
function spawnConfetti(x, y, amount) {
  for (let i = 0; i < amount; i++) {
    confetti.push({
      x, y,
      size: Math.random() * 6 + 4,
      color: `hsl(${Math.random() * 360}, 100%, 60%)`,
      vy: Math.random() * 2 + 1,
      vx: (Math.random() - 0.5) * 2,
      rotation: Math.random() * Math.PI,
      vr: (Math.random() - 0.5) * 0.2,
      alpha: 1
    });
  }
}

// ======== Animatie Loop ========
function animate() {
  ctx.fillStyle = "rgba(11, 15, 46, 0.1)";
  ctx.fillRect(0, 0, W, H);

  balloons.forEach(b => b.update());
  specialBalloons = specialBalloons.filter(sb => sb.update());
  fireworks.forEach((f, i) => {
    f.update();
    if (f.life <= 0 || f.particles.length === 0) fireworks.splice(i, 1);
  });

  confetti.forEach((c, i) => {
    c.x += c.vx;
    c.y += c.vy;
    c.rotation += c.vr;
    c.alpha -= 0.005;
    ctx.save();
    ctx.translate(c.x, c.y);
    ctx.rotate(c.rotation);
    ctx.globalAlpha = c.alpha;
    ctx.fillStyle = c.color;
    ctx.fillRect(-c.size/2, -c.size/2, c.size, c.size);
    ctx.restore();
    if (c.alpha <= 0) confetti.splice(i, 1);
  });

  if (allowRandomFireworks && Math.random() < 0.0008) {
    let fx = Math.random() * W;
    let fy = Math.random() * (H * 0.6);
    fireworks.push(new Firework(fx, fy, true));
  }

  requestAnimationFrame(animate);
}

// ======== Start ========
balloons = Array.from({length: 15}, () => new Balloon());
animate();

document.getElementById('startBtn').addEventListener('click', () => {
  document.getElementById('startBtn').style.display = 'none';
  document.getElementById('music').play();
  typeText("ðŸŽ‚ Happy Birthday Papa ðŸŽ‚", document.getElementById('title'), 60, true);
  typeText("Geniet van je dag! ðŸ°", document.getElementById('message'), 40, true);

  setInterval(() => {
    const types = ['color', 'glitter', 'spiral', 'confetti'];
    const type = types[Math.floor(Math.random() * types.length)];
    specialBalloons.push(new SpecialBalloon(type));
  }, 2500);

  allowRandomFireworks = true;
});

// ======== Typewriter Effect ========
function typeText(text, element, speed, pulseAfter) {
  let i = 0;
  element.innerHTML = '';
  const interval = setInterval(() => {
    element.innerHTML += text.charAt(i);
    i++;
    if (i >= text.length) {
      clearInterval(interval);
      if (pulseAfter) element.classList.add('pulse');
    }
  }, speed);
}

window.addEventListener('resize', () => {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
});
</script>
</body>
</html>
