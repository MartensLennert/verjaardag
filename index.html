<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>🎉 Happy Birthday Papa 🎉</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    font-family: 'Arial', sans-serif;
    text-align: center;
    background: radial-gradient(ellipse at top, #1a1f47, #0b0f2e);
  }
  h1, #message {
    position: relative;
    z-index: 5;
  }
  h1 {
    font-size: 3em;
    color: #ffd700;
    text-shadow: 0 0 15px #ffa500, 0 0 30px #ff4500, 0 0 50px #ff6347;
    margin-top: 80px;
  }
  #message {
    font-size: 1.5em;
    color: white;
    margin-top: 10px;
  }
  .pulse {
    animation: float 3s ease-in-out infinite, pulse 1.5s infinite;
  }
  button {
    padding: 15px 25px;
    font-size: 1.2em;
    border: none;
    border-radius: 10px;
    background: linear-gradient(45deg, #ffd700, #ffa500);
    color: black;
    font-weight: bold;
    cursor: pointer;
    margin-top: 20px;
    transition: transform 0.2s, box-shadow 0.3s;
    z-index: 10;
    position: relative;
  }
  button:hover {
    transform: scale(1.1);
    box-shadow: 0 0 15px #ffd700;
  }
  canvas {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 0;
  }
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }
  @keyframes pulse {
    0%, 100% { transform: scale(1); text-shadow: 0 0 15px #ffa500; }
    50% { transform: scale(1.05); text-shadow: 0 0 25px #ff4500; }
  }
  @media (max-width: 600px) {
    h1 { font-size: 2em; }
    #message { font-size: 1em; }
  }
</style>
</head>
<body>

<h1 id="title">🎂</h1>
<p id="message"></p>
<button id="startBtn">Klik hier voor de verrassing 🎶</button>

<canvas id="canvas"></canvas>
<audio id="music" src="muziek.mp3"></audio>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Lijsten
let balloons = [];
let specialBalloons = [];
let fireworks = [];

class Balloon {
  constructor() { this.reset(); }
  reset() {
    this.x = Math.random() * canvas.width;
    this.y = canvas.height + Math.random() * 200;
    this.width = Math.random() * 25 + 35;
    this.height = this.width * (1.2 + Math.random() * 0.3);
    this.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
    this.speed = Math.random() * 1.5 + 0.5;
    this.angle = Math.random() * Math.PI * 2;
  }
  draw() {
    ctx.save();
    ctx.translate(this.x + Math.sin(this.angle) * 10, this.y);
    ctx.beginPath();
    ctx.ellipse(0, 0, this.width / 2, this.height / 2, 0, 0, Math.PI * 2);
    ctx.fillStyle = this.color;
    ctx.fill();
    ctx.beginPath();
    ctx.ellipse(-this.width * 0.15, -this.height * 0.15, this.width / 8, this.height / 8, 0, 0, Math.PI * 2);
    ctx.fillStyle = "rgba(255,255,255,0.6)";
    ctx.fill();
    ctx.beginPath();
    ctx.moveTo(-5, this.height / 2 - 2);
    ctx.lineTo(5, this.height / 2 - 2);
    ctx.lineTo(0, this.height / 2 + 6);
    ctx.closePath();
    ctx.fillStyle = this.color;
    ctx.fill();
    ctx.beginPath();
    ctx.moveTo(0, this.height / 2 + 6);
    ctx.lineTo(0, this.height / 2 + 25);
    ctx.strokeStyle = "#bbb";
    ctx.lineWidth = 1;
    ctx.stroke();
    ctx.restore();
  }
  update() {
    this.y -= this.speed;
    this.angle += 0.01;
    if (this.y + this.height < 0) this.reset();
    this.draw();
  }
}

class SpecialBalloon extends Balloon {
  constructor() {
    super();
    this.phase = 0;
  }
  update() {
    this.phase += 0.05;
    let radius = 50 + this.phase * 3;
    this.x = canvas.width / 2 + Math.cos(this.phase + this.angle) * radius;
    this.y = canvas.height - this.phase * 5;
    if (this.phase > 15) {
      fireworks.push(new Firework(this.x, this.y));
      return false; // verwijderen
    }
    this.draw();
    return true; // behouden
  }
}

class Firework {
  constructor(x, y) {
    this.particles = [];
    for (let i = 0; i < 50; i++) {
      const angle = Math.random() * Math.PI * 2;
      const speed = Math.random() * 4 + 2;
      this.particles.push({
        x, y,
        vx: Math.cos(angle) * speed,
        vy: Math.sin(angle) * speed,
        alpha: 1,
        color: `hsl(${Math.random() * 360}, 100%, 60%)`
      });
    }
  }
  update() {
    this.particles.forEach(p => {
      p.x += p.vx;
      p.y += p.vy;
      p.vx *= 0.98;
      p.vy *= 0.98;
      p.alpha -= 0.02;
    });
    this.particles = this.particles.filter(p => p.alpha > 0);
    this.draw();
  }
  draw() {
    this.particles.forEach(p => {
      ctx.globalAlpha = p.alpha;
      ctx.beginPath();
      ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
      ctx.fillStyle = p.color;
      ctx.fill();
    });
    ctx.globalAlpha = 1;
  }
}

// Init ballonnen
balloons = Array.from({length: 15}, () => new Balloon());

function animate() {
  ctx.fillStyle = "rgba(11, 15, 46, 0.08)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  balloons.forEach(b => b.update());

  specialBalloons = specialBalloons.filter(sb => sb.update());

  fireworks.forEach((f, i) => {
    f.update();
    if (f.particles.length === 0) fireworks.splice(i, 1);
  });

  requestAnimationFrame(animate);
}
animate();

document.getElementById('startBtn').addEventListener('click', () => {
  const music = document.getElementById('music');
  music.load();
  music.play().then(() => {
    console.log("✅ Muziek gestart");
  }).catch(err => {
    console.warn("❌ Muziek geblokkeerd:", err);
  });

  typeText("🎂 Happy Birthday Papa! 🎂", document.getElementById('title'), 80, true);
  typeText("Veel liefde, geluk en plezier vandaag! 🎁", document.getElementById('message'), 40, true);

  // Elke 5 seconden een speciale ballon
  setInterval(() => {
    specialBalloons.push(new SpecialBalloon());
  }, 5000);
});

function typeText(text, element, speed, pulseAfter) {
  let i = 0;
  element.innerHTML = '';
  const interval = setInterval(() => {
    element.innerHTML += text.charAt(i);
    i++;
    if (i >= text.length) {
      clearInterval(interval);
      if (pulseAfter) element.classList.add('pulse');
    }
  }, speed);
}

window.addEventListener('resize', () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
</html>
